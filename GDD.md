# GDD - 游戏设计文档
# Earthlord: 末世开拓者

**文档版本**: v1.0
**创建日期**: 2025年12月
**游戏类型**: LBS位置服务 + 生存建造 + 多人在线
**目标平台**: iOS

---

## 1. 游戏概念

### 1.1 高概念 (High Concept)

**一句话描述:**
> 在末日废墟上,用双脚丈量土地、探索世界、建造家园,与全球玩家共同重建文明的LBS生存游戏。

**核心玩法公式:**
```
现实行走 + GPS定位 + 真实地标 = 虚拟领地 + 游戏资源 + 社交互动
```

**游戏卖点:**
1. **Walk to Earn**: 走路就能获得游戏价值
2. **真实地理映射**: 现实世界的每个地点都是游戏内容
3. **圈地占领**: 用脚步画出自己的王国
4. **生存体征**: 硬核的生存压力感
5. **全球多人**: 与附近玩家实时互动

### 1.2 世界观设定

#### 时间线

**2048年 - 终末战争**
- 全球爆发"世界战争",原因不明
- 72小时内,全球文明系统崩塌
- 99%人口消失(死亡/失踪)
- 通讯中断,电力瘫痪,城市废弃

**2048-2051年 - 避难时代**
- 1%幸存者躲在避难所
- 旧世界秩序完全失效
- 土地所有权归零
- 资源靠搜刮获取

**2051年 - 重建元年**
- 幸存者从避难所走出
- 《新开拓者协议》通过全球广播发布
- 核心法则: "凡以双足丈量之无主土地,皆为开拓者所有"
- 人类开始重建文明

#### 核心法则: 《新开拓者协议》

```
第一条: 土地所有权
凡以双足丈量之无主土地,在卫星系统记录下形成闭合领地者,
该领地归开拓者所有。

第二条: 资源归属
旧世界遗留之物资,先到先得。
开拓者有权搜刮任何无主建筑内的物资。

第三条: 建设义务
开拓者必须在30天内开始建设领地,
90天内保持活跃,否则领地将被回收。

第四条: 交易自由
开拓者之间可自由交易物资,
协议鼓励互助合作。

第五条: 通讯网络
残存的卫星通讯网络由所有幸存者共享,
按设备等级分配通讯权限。

第六条: 生存法则
每个开拓者需自行维持生存体征,
协议不保证任何幸存者的安全。
```

#### 视觉风格: "希望朋克" (Hopepunk)

**核心理念:** 废墟之上的新生,绝望中的希望

**视觉元素:**
- **色调**: 灰褐色废墟 + 青绿色新生植物 + 暖橙色人类建筑
- **对比**: 破败 vs 重建,死亡 vs 生命,绝望 vs 希望
- **符号**:
  - 破碎的旧世界标志(红十字、麦当劳、苹果logo)
  - 新世界的生机(嫩芽、水滴、火焰)
  - 开拓者的印记(足迹、篝火、旗帜)

**UI风格:**
- 末日HUD(抬头显示)风格
- 全息投影效果
- 手绘地图质感
- 电子终端界面

### 1.3 目标玩家

**核心玩家画像:**
- 年龄: 18-35岁
- 游戏经验: 玩过《宝可梦GO》《Ingress》《饥荒》等
- 生活方式: 喜欢户外运动,愿意探索城市
- 动机: 收集、竞争、社交、成就感

**游戏时长预期:**
- 每日游玩: 30-60分钟
- 每周游玩: 5-7天
- 单次时长: 15-30分钟(通勤、散步时)

---

## 2. 核心玩法循环

### 2.1 一级循环 (Core Loop) - 15分钟

```
开始游戏 → 打开地图 → 开始行走
    ↓
发现POI → 搜刮资源 → 获得物品
    ↓
查看背包 → 使用物品 → 恢复体征
    ↓
查看成就 → 获得奖励 → 继续探索
```

**设计目标**: 让玩家每15分钟都有即时反馈和奖励

### 2.2 二级循环 (Daily Loop) - 每日

```
每日登录 → 查看每日任务 → 规划路线
    ↓
探索3-5个POI → 收集资源 → 完成任务
    ↓
回到领地 → 建造/升级建筑 → 使用资源
    ↓
查看排行榜 → 对比进度 → 设定目标
    ↓
社交互动 → 频道聊天 → 交易物品
```

**设计目标**: 每日有明确的目标和进度感

### 2.3 三级循环 (Weekly Loop) - 每周

```
周一 → 制定本周目标(圈地、探索、建造)
    ↓
周二-周六 → 执行目标 → 积累资源
    ↓
周日 → 完成周成就 → 领取奖励
    ↓
查看周排行榜 → 评估进度 → 调整策略
```

**设计目标**: 长期目标驱动,防止单调

### 2.4 四级循环 (Long-term) - 月度/赛季

```
赛季开始 → 解锁赛季通行证 → 查看赛季奖励
    ↓
完成赛季任务 → 解锁里程碑 → 获得独特奖励
    ↓
参与全服活动 → 竞争赛季排行 → 获得称号
    ↓
赛季结束 → 结算奖励 → 重置排行
```

**设计目标**: 提供长期追求,延长游戏寿命

---

## 3. 核心系统设计

### 3.1 GPS圈地系统

#### 3.1.1 玩法流程

**步骤:**
1. 玩家打开游戏,看到卫星地图
2. 点击"开始圈地"按钮
3. 开始在现实世界行走
4. 游戏实时记录GPS轨迹,在地图上绘制蓝色线条
5. 当玩家走回起点附近(距离<50米),系统自动闭合轨迹
6. 系统验证轨迹合法性:
   - 没有作弊(移动速度≤8m/s)
   - 面积≥500m²
   - 没有与其他玩家领地重叠
7. 验证通过,轨迹变为绿色多边形,领地创建成功
8. 玩家可以命名领地

**技术参数:**
- GPS采样频率: 1次/秒(移动时),1次/5秒(静止时)
- 精度要求: ≤10米
- 速度检测阈值: 8m/s (约29km/h,跑步上限)
- 最小面积: 500m²
- 最大面积: 无限制(但建造需要资源)
- 闭合距离: 起点终点<50米

#### 3.1.2 作弊防护

**速度检测:**
```
if (当前点与上一点的距离 / 时间间隔) > 8m/s:
    该轨迹点标记为"可疑"
if 可疑点占比 > 20%:
    拒绝圈地,提示"检测到异常移动"
```

**轨迹平滑:**
- 使用卡尔曼滤波器消除GPS漂移
- 去除明显的跳跃点(距离>100米/秒)

**重叠检测:**
- 使用PostGIS的`ST_Overlaps`函数
- 查询数据库中所有领地,判断是否重叠
- 重叠面积>10%则拒绝

#### 3.1.3 游戏平衡

**面积与收益:**
- 领地面积越大,可建造的建筑数量越多
- 但大领地不会直接产生资源
- 核心理念: "圈地是为了建造,建造才能产出"

**领地限制:**
| 领地面积 | 最大建筑数量 | 推荐圈地时长 |
|---------|------------|------------|
| 500-2,000m² | 5 | 5-10分钟 |
| 2,000-10,000m² | 15 | 10-20分钟 |
| 10,000-50,000m² | 50 | 20-40分钟 |
| 50,000m²+ | 100+ | 40分钟+ |

---

### 3.2 POI探索与搜刮系统

#### 3.2.1 POI分类与资源映射

| POI类型 | 真实地点示例 | 主要产出资源 | 稀有资源 | 搜刮冷却 |
|--------|------------|------------|---------|---------|
| 医疗设施 | 医院、药店、诊所 | 药品、急救包 | 抗生素、手术工具 | 24小时 |
| 食品场所 | 超市、餐厅、便利店 | 罐头食品、饮用水 | 高级食材、酒类 | 24小时 |
| 工业场所 | 工厂、工地、仓库 | 金属、工具 | 高级合金、机械零件 | 24小时 |
| 自然场所 | 公园、森林、湖泊 | 木材、草药 | 稀有植物、种子 | 12小时 |
| 金融场所 | 银行、珠宝店 | 电子元件 | 黄金、钻石 | 48小时 |
| 交通设施 | 加油站、停车场 | 燃料、塑料 | 电池、轮胎 | 24小时 |
| 教育场所 | 学校、图书馆 | 纸张、布料 | 书籍、地图 | 24小时 |

#### 3.2.2 搜刮机制

**触发条件:**
- 玩家进入POI的100米范围内
- 该POI未在冷却时间内
- 玩家背包有空位

**奖励生成算法:**
```
搜刮奖励 = 基础奖励 × 距离加成 × 时间加成 × 会员加成

基础奖励:
  - 根据POI类型决定
  - 3-5种物品,每种5-30个

距离加成:
  if 本次探索距离 > 2km:
    奖励 × 1.5
  if 本次探索距离 > 5km:
    奖励 × 2.0

时间加成:
  if 本次探索时长 > 30分钟:
    奖励 × 1.5

会员加成:
  if 玩家是订阅会员:
    奖励 × 1.5
```

**稀有物品掉落:**
```
普通物品: 80%概率
稀有物品: 15%概率
史诗物品: 4%概率
传说物品: 1%概率
```

#### 3.2.3 探索统计

**记录数据:**
- 探索距离(公里)
- 探索时长(分钟)
- 探索POI数量
- 获得资源总量

**成就关联:**
- "首次探索": 搜刮第一个POI
- "城市漫步者": 探索10个POI
- "废墟拾荒者": 探索100个POI
- "领地探险家": 探索1000个POI

---

### 3.3 背包与物品系统

#### 3.3.1 物品分类

**消耗品 (Consumables)**
| 物品名称 | 类别 | 效果 | 获取途径 |
|---------|-----|------|---------|
| 罐头食品 | 食物 | +30饱食度 | 超市POI |
| 饮用水 | 饮料 | +40水分 | 超市/公园POI |
| 急救包 | 药品 | +50生命值 | 医院POI |
| 抗生素 | 药品 | +20生命值,清除"感染"状态 | 医院POI(稀有) |
| 能量饮料 | 饮料 | +20水分,+10饱食度,临时加速 | 便利店POI |

**材料 (Materials)**
| 物品名称 | 类别 | 用途 | 获取途径 |
|---------|-----|------|---------|
| 木材 | 基础材料 | 建造生存类建筑 | 公园POI |
| 石头 | 基础材料 | 建造生存类建筑 | 公园POI |
| 金属 | 进阶材料 | 建造生产类建筑 | 工厂POI |
| 塑料 | 进阶材料 | 建造储存类建筑 | 加油站POI |
| 电子元件 | 高级材料 | 建造能源类建筑 | 银行POI |
| 稀有合金 | 稀有材料 | 升级高级建筑 | 工厂POI(稀有) |

**工具 (Tools)**
| 物品名称 | 效果 | 获取途径 |
|---------|------|---------|
| 铁锹 | 加快农田生产速度 | 工厂POI |
| 锤子 | 加快建造速度 | 工厂POI |
| 手电筒 | 夜间探索范围+50% | 便利店POI |
| 地图 | 显示周围未探索的POI | 图书馆POI |

#### 3.3.2 背包容量系统

**容量机制:**
- 初始容量: 100格
- 每种物品占1格
- 同种物品可堆叠,上限99个

**扩容方式:**
| 方式 | 增加容量 | 成本 |
|-----|---------|------|
| 建造小仓库 | +50格 | 木材×50,石头×30 |
| 建造中仓库 | +100格 | 木材×100,金属×50 |
| 建造大仓库 | +200格 | 金属×100,塑料×50 |
| 订阅会员 | +100格 | $9.99/月 |

#### 3.3.3 物品使用

**使用逻辑:**
```
点击物品 → 弹出菜单:
  - 使用: 立即消耗物品,获得效果
  - 丢弃: 删除物品(不可恢复)
  - 交易: 发布交易挂单
  - 查看详情: 显示物品描述和属性
```

**批量使用:**
- 长按物品 → 拖动滑块选择数量 → 批量使用

---

### 3.4 建造系统

#### 3.4.1 建筑分类与配置表

**Tier 1: 生存基础建筑**
| 建筑名称 | 功能 | 建造成本 | 建造时间 | 占地面积 |
|---------|-----|---------|---------|---------|
| 篝火 | 提供温暖,夜间休息点 | 石头×20,木材×30 | 即时 | 4m² |
| 庇护所 | 休息恢复生命值 | 木材×50,布料×20 | 5分钟 | 16m² |
| 小仓库 | 扩展背包+50格 | 木材×50,石头×30 | 10分钟 | 9m² |
| 水井 | 每6小时产出饮用水×10 | 石头×40,金属×10 | 15分钟 | 4m² |

**Tier 2: 功能扩展建筑**
| 建筑名称 | 功能 | 建造成本 | 建造时间 | 占地面积 |
|---------|-----|---------|---------|---------|
| 中仓库 | 扩展背包+100格 | 木材×100,金属×50 | 30分钟 | 25m² |
| 农田 | 每12小时产出食物×20 | 木材×50,种子×10 | 1小时 | 100m² |
| 工作台 | 合成高级物品 | 木材×100,金属×50 | 30分钟 | 16m² |
| 营地电台 | 升级通讯范围到10km | 金属×100,电子元件×20 | 2小时 | 9m² |

**Tier 3: 高级设施建筑**
| 建筑名称 | 功能 | 建造成本 | 建造时间 | 占地面积 |
|---------|-----|---------|---------|---------|
| 大仓库 | 扩展背包+200格 | 金属×200,塑料×100 | 2小时 | 64m² |
| 加工厂 | 将原材料加工成高级材料 | 金属×200,电子元件×50 | 4小时 | 100m² |
| 太阳能板 | 产出能源,驱动高级建筑 | 电子元件×100,金属×50 | 3小时 | 25m² |
| 风力发电机 | 产出能源(比太阳能效率高) | 金属×150,稀有合金×30 | 4小时 | 16m² |
| 卫星通讯站 | 升级通讯范围到全球 | 电子元件×200,稀有合金×50 | 8小时 | 36m² |

#### 3.4.2 建造流程

```
步骤1: 选择建筑
  - 打开建造菜单
  - 浏览建筑分类(生存/储存/生产/能源)
  - 查看建筑详情(成本、功能、占地)

步骤2: 验证资源
  - 检查玩家背包是否有足够资源
  - 不足则提示"资源不足,继续探索获取"

步骤3: 选择位置
  - 进入建造模式,拖动建筑图标
  - 只能放置在自己的领地内
  - 检测是否有足够的空地

步骤4: 确认建造
  - 扣除资源
  - 建筑进入"建造中"状态
  - 开始倒计时

步骤5: 完成建造
  - 倒计时结束,建筑进入"待激活"状态
  - 玩家点击"激活"后,建筑开始运作
```

#### 3.4.3 建筑状态机

```
状态转换图:

[建造中] → (时间到) → [待激活]
    ↓
    ↓ (点击激活,消耗启动资源)
    ↓
[运行中] ⇄ (定期产出/消耗)
    ↓
    ↓ (耐久度归零或资源不足)
    ↓
[损坏] → (点击维修,消耗资源) → [运行中]
    ↓
    ↓ (点击拆除)
    ↓
[已拆除] → 回收部分资源
```

**状态说明:**
- **建造中**: 倒计时中,不可操作
- **待激活**: 已建成,需要消耗资源激活
- **运行中**: 正常工作,产出资源
- **损坏**: 停止工作,需要维修
- **已拆除**: 建筑消失,返还50%资源

#### 3.4.4 建筑升级

**升级系统:**
- 每个建筑可升级2次(Tier 1 → 2 → 3)
- 升级效果:
  - 产出量 +50%
  - 产出速度 +30%
  - 耐久度 +100%

**升级成本:**
| 升级等级 | 成本 | 升级时间 |
|---------|------|---------|
| Tier 1 → 2 | 原建造成本×1.5 | 原时间×2 |
| Tier 2 → 3 | 原建造成本×3 | 原时间×4 |

---

### 3.5 交易系统

#### 3.5.1 交易类型

**1. 玩家交易 (P2P Trading)**
- 以物易物,无货币
- 基于位置触发(100米范围内)
- 需要双方都开启"允许交易"权限

**2. 交易所 (未实现,预留)**
- 全球交易市场
- 使用游戏币作为中介货币
- 需要订阅会员才能访问

#### 3.5.2 交易流程

```
步骤1: 发起方发布挂单
  - 选择"我提供"的物品和数量
  - 选择"我需要"的物品和数量
  - 发布挂单(存储在数据库)

步骤2: 接收方发现挂单
  - 当接收方进入发起方100米范围内
  - 系统通知"发现附近的交易"
  - 显示挂单列表

步骤3: 接收方接受交易
  - 点击挂单,查看详情
  - 点击"接受交易"
  - 系统验证双方资源:
    - 发起方是否有"我提供"的物品
    - 接收方是否有"我需要"的物品
    - 双方背包是否有空位

步骤4: 执行交易
  - 使用数据库事务(Transaction)保证原子性:
    BEGIN TRANSACTION;
      扣除发起方物品;
      扣除接收方物品;
      增加发起方物品;
      增加接收方物品;
      删除挂单;
      记录交易历史;
    COMMIT;
  - 成功则双方收到通知"交易成功"
  - 失败则回滚,通知"交易失败"
```

#### 3.5.3 交易限制

**防刷机制:**
- 每个玩家最多同时发布5个挂单
- 每个玩家每天最多完成20笔交易
- 挂单有效期7天,过期自动删除

**公平性保障:**
- 不允许1:0交易(免费赠送)
- 系统会标注"不公平交易"(价值相差10倍以上)
- 但不强制禁止(玩家自行判断)

---

### 3.6 通讯系统

#### 3.6.1 频道类型

**1. 公共频道 (Public Channel)**
- **覆盖范围**: 半径3km
- **触发机制**: 自动加入,基于GPS位置
- **刷新机制**: 每30秒检测位置,超出范围自动离开
- **消息保留**: 最近100条消息
- **发送权限**: 所有玩家(需要对讲机等级)

**2. 自定义频道 (Custom Channel)**
- **覆盖范围**: 无限制(全球)
- **创建条件**: 任何玩家可创建
- **加入方式**: 主动搜索并加入
- **消息保留**: 最近500条消息
- **管理权限**: 创建者可踢人、删频道

**3. 私聊 (Direct Message) - 未实现**
- **覆盖范围**: 无限制
- **触发条件**: 需要添加好友
- **消息保留**: 永久保存

#### 3.6.2 消息类型

**文本消息:**
```json
{
  "type": "text",
  "content": "你好,有人吗?",
  "sender_id": "user_123",
  "sender_name": "开拓者Alpha",
  "timestamp": "2051-03-15T10:30:00Z",
  "location": {"lat": 22.123, "lng": 113.456}
}
```

**PTT语音消息:**
```json
{
  "type": "audio",
  "audio_url": "https://...",
  "duration": 5.2,
  "sender_id": "user_456",
  "sender_name": "开拓者Beta",
  "timestamp": "2051-03-15T10:31:00Z",
  "location": {"lat": 22.124, "lng": 113.457}
}
```

**系统消息:**
```json
{
  "type": "system",
  "content": "玩家[开拓者Alpha]进入频道",
  "timestamp": "2051-03-15T10:32:00Z"
}
```

#### 3.6.3 通讯设备等级

| 设备等级 | 设备名称 | 功能权限 | 覆盖范围 | 升级成本 |
|---------|---------|---------|---------|---------|
| L1 | 收音机 | 只能接收消息 | 3km | 初始设备 |
| L2 | 对讲机 | 可以收发文本和语音 | 3km | 金属×50,电子元件×10 |
| L3 | 营地电台 | 可以创建频道,范围扩大 | 10km | 建造营地电台建筑 |
| L4 | 卫星通讯 | 全球通讯,无限制 | 全球 | 建造卫星通讯站建筑 |

**等级限制示例:**
```
if 玩家设备等级 == L1:
    显示公共频道消息 ✅
    发送消息 ❌ (提示"需要升级到对讲机")

if 玩家设备等级 == L2:
    显示公共频道消息 ✅
    发送消息 ✅
    创建频道 ❌ (提示"需要建造营地电台")
```

---

### 3.7 生存体征系统

#### 3.7.1 三大体征

**核心生命 (Health)**
- **范围**: 0-100
- **初始值**: 100
- **自然衰减**: 不会自动下降
- **损失来源**:
  - 饱食度<20时,每10分钟-5
  - 水分<20时,每10分钟-10
  - (未来扩展: 遭遇危险事件)
- **恢复方式**:
  - 使用急救包: +50
  - 使用抗生素: +20
  - 在庇护所休息: 每小时+10
- **归零后果**: 游戏结束,重新开始(保留领地和建筑,但清空背包)

**饱食度 (Hunger)**
- **范围**: 0-100%
- **初始值**: 100%
- **自然衰减**: 每小时-5%
- **增益效果**:
  - >80%: 探索获得资源+20%
  - <20%: 开始掉血,每10分钟-5生命
- **恢复方式**:
  - 罐头食品: +30%
  - 高级食材: +50%
  - 能量饮料: +10%

**水分 (Thirst)**
- **范围**: 0-100%
- **初始值**: 100%
- **自然衰减**: 每小时-10%
- **增益效果**:
  - >80%: 移动速度+10%(实际不影响GPS,仅动画效果)
  - <20%: 开始掉血,每10分钟-10生命
- **恢复方式**:
  - 饮用水: +40%
  - 能量饮料: +20%

#### 3.7.2 时间衰减机制

**前台运行时:**
```
每10分钟触发一次检测:
  - 饱食度 -= 5% × (10/60)
  - 水分 -= 10% × (10/60)
  - if 饱食度 < 20% or 水分 < 20%:
      生命值 -= 对应惩罚
```

**后台运行时:**
```
当玩家重新打开游戏:
  - 计算离线时长(单位:小时)
  - 饱食度 -= 5% × 离线时长
  - 水分 -= 10% × 离线时长
  - 计算生命值损失
  - 显示"离线期间损失"提示
```

**会员特权:**
- 订阅会员: 衰减速度-50%
- 领主通行证: 衰减速度-70%,且<20%不会掉血

#### 3.7.3 生存压力平衡

**设计目标:**
- 让玩家每天都有"必须登录"的动力
- 但不要过于惩罚休闲玩家

**平衡策略:**
- 如果3天未登录,体征不再继续下降(封顶)
- 如果7天未登录,自动赠送一组食物和水(防止弃坑)
- 新手保护: 前7天不会因体征归零而游戏结束

---

### 3.8 成就系统

#### 3.8.1 成就分类

**探索类成就**
| 成就名称 | 条件 | 奖励 | 稀有度 |
|---------|-----|------|-------|
| 首次探索 | 搜刮第一个POI | 金币×100 | 普通 |
| 城市漫步者 | 搜刮10个POI | 金币×500 | 普通 |
| 废墟拾荒者 | 搜刮100个POI | 金币×5,000 | 稀有 |
| 全球探险家 | 搜刮1,000个POI | 金币×50,000,称号"探险家" | 史诗 |
| 未知领域 | 搜刮10个未被任何人搜刮过的POI | 金币×10,000 | 史诗 |

**圈地类成就**
| 成就名称 | 条件 | 奖励 | 稀有度 |
|---------|-----|------|-------|
| 新手领主 | 完成第一次圈地 | 金币×200 | 普通 |
| 地产大亨 | 拥有5块领地 | 金币×2,000 | 稀有 |
| 开拓先锋 | 领地总面积>10,000m² | 金币×5,000 | 稀有 |
| 领地之王 | 领地总面积>100,000m² | 金币×50,000,称号"领主" | 传说 |

**建造类成就**
| 成就名称 | 条件 | 奖励 | 稀有度 |
|---------|-----|------|-------|
| 初级建造师 | 建造第一个建筑 | 金币×100 | 普通 |
| 家园设计师 | 建造10个建筑 | 金币×1,000 | 普通 |
| 城市规划师 | 建造50个建筑 | 金币×10,000 | 史诗 |
| 文明重建者 | 建造所有15种建筑 | 金币×20,000,称号"建造大师" | 传说 |

**社交类成就**
| 成就名称 | 条件 | 奖励 | 稀有度 |
|---------|-----|------|-------|
| 初次交易 | 完成第一笔交易 | 金币×200 | 普通 |
| 商人 | 完成50笔交易 | 金币×5,000 | 稀有 |
| 社交达人 | 在公共频道发送100条消息 | 金币×1,000 | 普通 |
| 联盟领袖 | 创建频道并吸引50个成员 | 金币×10,000 | 史诗 |

#### 3.8.2 成就触发机制

**EventBus模式:**
```
步骤1: 游戏事件发生
  - 例如: 玩家完成圈地

步骤2: 发布事件
  EventBus.publish("territory_claimed", {
    territory_id: "xxx",
    area: 2003,
    player_id: "user_123"
  })

步骤3: 成就系统监听事件
  AchievementManager.subscribe("territory_claimed", (data) => {
    检查是否达成成就:
      - "新手领主": 第一次圈地
      - "地产大亨": 领地数量≥5
      - "开拓先锋": 总面积>10,000m²

    if 达成:
      解锁成就
      发放奖励
      显示成就通知
  })
```

**优点:**
- 功能模块之间解耦
- 成就系统可以独立开发和维护
- 容易扩展新成就

---

### 3.9 排行榜系统

#### 3.9.1 排行榜类型

**领地面积榜**
- **排名依据**: 玩家所有领地的总面积
- **更新频率**: 每5分钟
- **展示内容**: 排名、昵称、总面积、领地数量

**探索废墟榜**
- **排名依据**: 玩家搜刮POI的总次数
- **更新频率**: 每5分钟
- **展示内容**: 排名、昵称、探索次数、总距离

**建筑数量榜**
- **排名依据**: 玩家建造的建筑总数
- **更新频率**: 每5分钟
- **展示内容**: 排名、昵称、建筑数量、最高建筑等级

#### 3.9.2 排行榜奖励

**每周结算:**
- Top 1: 金币×10,000,称号"本周冠军"
- Top 2-10: 金币×5,000
- Top 11-100: 金币×1,000

**赛季结算:**
- Top 1: 金币×100,000,永久称号,独特头像框
- Top 2-10: 金币×50,000,赛季称号
- Top 11-100: 金币×10,000

---

### 3.10 付费系统

#### 3.10.1 订阅产品

**开拓者月卡 ($9.99/月)**
- 无限探索(取消POI冷却时间)
- 探索范围扩大50%
- 资源获取+50%
- 背包容量+100格
- 生存体征衰减-50%

**领主通行证 ($19.99/月)**
- 包含开拓者月卡所有特权
- 资源获取+100%
- 建造时间-50%
- 背包容量+200格
- 生存体征衰减-70%
- 专属称号和头像框
- 优先客服支持

#### 3.10.2 一次性购买

**资源包:**
| 产品名称 | 价格 | 内容 |
|---------|-----|------|
| 初级物资包 | $0.99 | 罐头×20,饮用水×20,木材×50 |
| 中级物资包 | $2.99 | 罐头×50,饮用水×50,金属×50,急救包×10 |
| 高级物资包 | $4.99 | 罐头×100,饮用水×100,金属×100,电子元件×20 |
| 稀有资源包 | $9.99 | 稀有合金×50,高级食材×50,抗生素×20 |

**通讯设备:**
| 产品名称 | 价格 | 效果 |
|---------|-----|------|
| 对讲机升级包 | $1.99 | 直接升级到对讲机(L2) |
| 营地电台包 | $4.99 | 直接解锁营地电台(L3) |
| 卫星通讯包 | $9.99 | 直接解锁卫星通讯(L4) |

#### 3.10.3 付费设计哲学

**核心原则:**
1. **不是Pay to Win**: 付费不能直接购买竞争优势
2. **便利性付费**: 主要卖"时间"和"便利"
3. **免费可玩**: 不付费也能享受完整游戏体验
4. **尊重玩家**: 不强制付费,不诱导未成年人消费

**付费点设计:**
- **时间换金钱**: 订阅减少等待时间
- **容量扩展**: 背包扩容,减少整理负担
- **外观道具**: 独特称号、头像框(未来扩展)
- **社交特权**: 创建更多频道、发送更多消息

---

## 4. 游戏经济系统

### 4.1 资源流转图

```
[现实世界] → 玩家行走 → [GPS定位]
    ↓
[POI探索] → 搜刮 → [获得资源]
    ↓
[背包存储] → 选择 → [3条路径]
    ↓              ↓           ↓
[建造消耗]      [交易流通]   [生存消耗]
    ↓              ↓           ↓
[建筑产出]      [获得其他资源] [维持体征]
    ↓              ↓           ↓
    └──────→ [循环] ←──────┘
```

### 4.2 资源产出与消耗平衡

**每日产出(以中度玩家为例):**
- 探索3个POI: 食物×60,水×60,材料×50
- 建筑产出: 食物×40(农田),水×20(水井)
- 总计: 食物×100,水×80,材料×50

**每日消耗:**
- 生存体征: 食物×24(24小时×5%×20单位),水×48(24小时×10%×20单位)
- 建造1个建筑: 材料×50-100
- 余额: 可用于交易或存储

**平衡结论:**
- 每天探索2-3次,可以维持生存
- 额外探索或交易,才能快速发展
- 鼓励玩家走出去,而不是坐等建筑产出

### 4.3 通货膨胀控制

**资源沉没(Sink)机制:**
1. **建造消耗**: 永久消耗资源
2. **建筑维修**: 定期消耗资源
3. **生存消耗**: 持续消耗食物和水
4. **交易手续费**: 未来可能引入

**防止通胀:**
- 不引入"印钱"机制(无限刷资源)
- 高级资源只能通过稀有POI获得
- 会员特权不直接赠送资源,只提高效率

---

## 5. 游戏进度与节奏设计

### 5.1 新手引导 (Day 1-3)

**第1天: 基础体验**
- 目标: 理解核心玩法
- 任务:
  1. 完成登录注册
  2. 完成第一次圈地(引导玩家走一小圈)
  3. 探索第一个POI并搜刮
  4. 建造第一个建筑(篝火)
  5. 使用第一个物品(罐头食品)
- 奖励: 金币×500,初级物资包×1

**第2天: 扩展玩法**
- 目标: 熟悉系统功能
- 任务:
  1. 圈第二块地
  2. 探索3个不同类型的POI
  3. 建造庇护所
  4. 加入公共频道并发送消息
- 奖励: 金币×1,000,对讲机升级材料×1

**第3天: 社交互动**
- 目标: 体验社交功能
- 任务:
  1. 发布一个交易挂单
  2. 加入一个自定义频道
  3. 在排行榜查看自己的排名
- 奖励: 金币×2,000

### 5.2 成长曲线

**Early Game (Week 1)**
- **目标**: 建立基础领地,熟悉玩法
- **里程碑**:
  - 领地面积达到5,000m²
  - 建造5个基础建筑
  - 探索20个POI
  - 加入3个频道
- **感受**: 快速成长,频繁奖励

**Mid Game (Week 2-4)**
- **目标**: 扩展规模,参与竞争
- **里程碑**:
  - 领地面积达到20,000m²
  - 建造15个建筑,其中包含Tier 2建筑
  - 探索100个POI
  - 进入排行榜Top 100
  - 完成10笔交易
- **感受**: 进度放缓,需要策略

**Late Game (Month 2+)**
- **目标**: 冲击排行榜,收集稀有成就
- **里程碑**:
  - 领地面积达到100,000m²
  - 建造所有15种建筑
  - 探索500个POI
  - 进入排行榜Top 10
  - 解锁传说成就
- **感受**: 长期追求,社交为主

**End Game (Month 6+)**
- **目标**: 联盟战争(未来版本),赛季竞争
- **里程碑**:
  - 创建联盟
  - 参与联盟战争
  - 获得赛季第一
- **感受**: PvP竞争,团队协作

### 5.3 留存设计

**次日留存 (D1 Retention): 目标40%**
- **钩子**: 建筑建造倒计时(明天回来查看)
- **奖励**: 次日登录奖励(金币×500)
- **紧迫感**: 生存体征即将下降

**7日留存 (D7 Retention): 目标25%**
- **钩子**: 每日任务累计奖励(完成7天解锁大礼包)
- **社交**: 加入频道,结识其他玩家
- **成就**: 解锁新手成就系列

**30日留存 (D30 Retention): 目标15%**
- **钩子**: 赛季排行榜(月度结算)
- **沉没成本**: 已经投入大量时间建设领地
- **社交关系**: 交易伙伴、频道好友

---

## 6. UI/UX设计

### 6.1 主界面布局

**主屏幕 (地图视图)**
```
┌────────────────────────────────────┐
│  [≡] Earthlord        [🔔] [⚙️]   │ ← 顶部栏
├────────────────────────────────────┤
│                                    │
│          [卫星地图视图]              │
│       - 玩家位置(蓝色光点)            │
│       - 领地多边形(绿色区域)          │
│       - POI标记(彩色图标)            │
│       - 其他玩家(灰色光点)            │
│                                    │
│                                    │
├────────────────────────────────────┤
│  [开始圈地]  按钮(如果未在圈地模式)     │ ← 操作区
│  或                                 │
│  [完成圈地]  按钮(如果正在圈地)        │
├────────────────────────────────────┤
│  [🗺️地图] [🎒背包] [💬通讯] [👤个人] │ ← 底部导航栏
└────────────────────────────────────┘
```

**体征显示 (HUD)**
```
左上角:
┌─────────────────┐
│ ❤️ 69/100      │ ← 生命值
│ 🍖 68%         │ ← 饱食度
│ 💧 70%         │ ← 水分
└─────────────────┘

右上角:
┌─────────────────┐
│ 📍 已圈地: 2    │ ← 领地统计
│ 🏠 建筑: 6      │ ← 建筑统计
│ 📦 41/100       │ ← 背包容量
└─────────────────┘
```

### 6.2 色彩系统

**主题色:**
- **主色调**: 灰褐色 (#8B7355) - 废土感
- **强调色**: 橙黄色 (#FFA500) - 希望之光
- **辅助色**: 青绿色 (#2E8B57) - 新生植物
- **警告色**: 红色 (#DC143C) - 危险/低体征
- **信息色**: 蓝色 (#1E90FF) - 水源/冷静

**状态颜色:**
- 成功: 绿色 (#32CD32)
- 警告: 黄色 (#FFD700)
- 错误: 红色 (#DC143C)
- 中性: 灰色 (#808080)

### 6.3 图标设计

**导航图标:**
- 地图: 🗺️ 折叠的地图
- 背包: 🎒 背包轮廓
- 通讯: 💬 对讲机/无线电
- 个人: 👤 人像剪影

**资源图标:**
- 食物: 罐头图标(复古风)
- 水: 水滴图标
- 木材: 原木图标
- 金属: 齿轮图标
- 电子元件: 电路板图标

**建筑图标:**
- 篝火: 火焰图标
- 庇护所: 帐篷图标
- 仓库: 箱子图标
- 农田: 麦穗图标
- 太阳能板: 太阳图标

### 6.4 交互动效

**地图交互:**
- 拖拽: 平滑跟随手指
- 缩放: 双指捏合,流畅缩放
- 旋转: 双指旋转,调整地图方向

**圈地动效:**
- 轨迹绘制: 蓝色线条逐步绘制,带发光效果
- 闭合动画: 线条首尾连接,闪烁提示
- 领地填充: 绿色半透明区域从中心向外扩散

**POI发现:**
- 发现动画: POI图标从小到大弹出,带震动反馈
- 搜刮动画: 图标旋转,粒子效果飞向背包图标
- 奖励展示: 物品卡片翻转显示,带金色光晕

**建造动画:**
- 拖拽建筑: 建筑图标跟随手指,半透明预览
- 放置确认: 建筑图标放大,绿色勾选✓出现
- 建造进度: 圆形进度条围绕建筑旋转

---

## 7. 音效与音乐设计

### 7.1 背景音乐

**主题音乐 (Main Theme)**
- **风格**: 后摇滚(Post-rock) + 环境音(Ambient)
- **情绪**: 孤独、希望、史诗感
- **乐器**: 吉他、合成器、弦乐、环境采样
- **参考**: 《最后生还者》《行尸走肉》《辐射》系列

**场景音乐:**
| 场景 | 风格 | 情绪 |
|-----|------|------|
| 地图浏览 | 环境音 + 轻柔旋律 | 平静、探索欲 |
| 圈地中 | 节奏感 + 上升旋律 | 紧张、期待 |
| 建造界面 | 轻快节奏 + 工业音效 | 专注、创造 |
| 通讯频道 | 电子音 + 失真效果 | 科技感、连接感 |
| 战斗(未来) | 重节奏 + 紧张旋律 | 激烈、竞争 |

### 7.2 音效设计

**UI交互音效:**
- 按钮点击: 轻微"哒"声,机械感
- 页面切换: "唰"声,空间感
- 成功操作: "叮"声,满足感
- 错误操作: "咚"声,低沉

**游戏动作音效:**
| 动作 | 音效描述 |
|-----|---------|
| GPS定位 | 雷达"哔哔"声 |
| 开始圈地 | 电子启动音"嗡~" |
| 完成圈地 | 胜利音效"噔噔噔噔↑" |
| 发现POI | 无线电干扰声 + "发现信号" |
| 搜刮物资 | 翻找声 + 物品掉落声 |
| 获得物品 | 清脆的"叮"声 |
| 建造完成 | 重锤敲击声 + 建筑落成音 |
| 收到消息 | 对讲机"滋~"声 |
| 发送消息 | 对讲机"咔哒"键音 |
| 体征警告 | 心跳加速声 + 警报音 |
| 成就解锁 | 史诗音效 + 欢呼声 |

### 7.3 环境音效

**基于时间:**
- 白天: 鸟鸣、风声、远处车声
- 夜晚: 虫鸣、风声、偶尔狗吠

**基于天气(未来扩展):**
- 晴天: 轻柔风声
- 雨天: 雨滴声、雷声
- 雾天: 低沉风声、回音效果

---

## 8. 技术实现

### 8.1 技术架构

**客户端架构:**
```
┌─────────────────────────────────────┐
│          SwiftUI Views              │ ← UI层
├─────────────────────────────────────┤
│       ViewModels (MVVM)             │ ← 视图逻辑层
├─────────────────────────────────────┤
│    Managers (Business Logic)        │ ← 业务逻辑层
│  - LocationManager                  │
│  - TerritoryManager                 │
│  - POIManager                       │
│  - ItemManager                      │
│  - BuildingManager                  │
│  - TradeManager                     │
│  - CommunicationManager             │
│  - AchievementManager               │
│  - VitalSignsManager                │
├─────────────────────────────────────┤
│    Services (API & Database)        │ ← 数据层
│  - Supabase API Client              │
│  - Local Database (SQLite)          │
│  - Cache Layer                      │
├─────────────────────────────────────┤
│    Core Frameworks                  │ ← 系统框架
│  - MapKit (地图)                    │
│  - CoreLocation (定位)              │
│  - StoreKit (支付)                  │
│  - AVFoundation (音频)              │
└─────────────────────────────────────┘
```

**后端架构 (Supabase):**
```
┌─────────────────────────────────────┐
│         Client App (iOS)            │
└───────────────┬─────────────────────┘
                │
                ↓ HTTPS/WebSocket
┌─────────────────────────────────────┐
│         Supabase Gateway            │
├─────────────────────────────────────┤
│  - Auth: 用户认证                    │
│  - Realtime: 实时推送                │
│  - API: RESTful接口                 │
│  - Storage: 文件存储                 │
├─────────────────────────────────────┤
│    PostgreSQL + PostGIS             │ ← 数据库
│  - users 用户表                      │
│  - territories 领地表                │
│  - items 物品表                      │
│  - buildings 建筑表                  │
│  - trades 交易表                     │
│  - messages 消息表                   │
│  - achievements 成就表               │
└─────────────────────────────────────┘
```

### 8.2 数据库设计

**核心表结构:**

**users (用户表)**
```sql
CREATE TABLE users (
  id UUID PRIMARY KEY,
  username TEXT UNIQUE NOT NULL,
  email TEXT UNIQUE,
  avatar_url TEXT,
  created_at TIMESTAMP DEFAULT NOW(),
  level INT DEFAULT 1,
  gold INT DEFAULT 0,
  device_level INT DEFAULT 1, -- 通讯设备等级
  subscription_tier INT DEFAULT 0 -- 订阅等级
);
```

**territories (领地表)**
```sql
CREATE TABLE territories (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES users(id),
  name TEXT,
  boundary GEOMETRY(POLYGON, 4326) NOT NULL, -- PostGIS多边形
  area REAL, -- 面积(m²)
  created_at TIMESTAMP DEFAULT NOW(),
  last_active_at TIMESTAMP,
  allow_trade BOOLEAN DEFAULT true
);

-- 空间索引,用于快速查询附近领地
CREATE INDEX territories_boundary_idx ON territories USING GIST(boundary);
```

**items (物品表)**
```sql
CREATE TABLE items (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES users(id),
  item_type TEXT NOT NULL, -- 物品类型
  quantity INT NOT NULL,
  obtained_at TIMESTAMP DEFAULT NOW()
);
```

**buildings (建筑表)**
```sql
CREATE TABLE buildings (
  id UUID PRIMARY KEY,
  territory_id UUID REFERENCES territories(id),
  building_type TEXT NOT NULL,
  position GEOMETRY(POINT, 4326), -- 建筑位置
  status TEXT, -- 状态: building/inactive/active/damaged
  tier INT DEFAULT 1, -- 等级1-3
  created_at TIMESTAMP,
  activated_at TIMESTAMP
);
```

**trades (交易表)**
```sql
CREATE TABLE trades (
  id UUID PRIMARY KEY,
  creator_id UUID REFERENCES users(id),
  creator_location GEOMETRY(POINT, 4326), -- 发起者位置
  offer_items JSONB, -- 提供的物品 [{item_type, quantity}]
  request_items JSONB, -- 需要的物品
  status TEXT, -- pending/completed/cancelled
  created_at TIMESTAMP,
  completed_at TIMESTAMP,
  acceptor_id UUID REFERENCES users(id)
);

-- 空间索引,用于查询附近的交易
CREATE INDEX trades_location_idx ON trades USING GIST(creator_location);
```

**messages (消息表)**
```sql
CREATE TABLE messages (
  id UUID PRIMARY KEY,
  channel_id UUID, -- NULL表示公共频道
  sender_id UUID REFERENCES users(id),
  content TEXT,
  message_type TEXT, -- text/audio/system
  audio_url TEXT,
  location GEOMETRY(POINT, 4326),
  created_at TIMESTAMP DEFAULT NOW()
);

-- 空间索引,用于查询附近的消息
CREATE INDEX messages_location_idx ON messages USING GIST(location);
```

### 8.3 关键算法

**GPS轨迹闭合判断:**
```swift
func isTrackClosed(track: [CLLocationCoordinate2D]) -> Bool {
    guard track.count >= 3 else { return false }

    let start = track.first!
    let end = track.last!

    let distance = calculateDistance(from: start, to: end)

    return distance < 50 // 50米内视为闭合
}
```

**多边形面积计算:**
```swift
func calculateArea(polygon: [CLLocationCoordinate2D]) -> Double {
    // 使用Shoelace公式计算球面多边形面积
    var area: Double = 0
    let n = polygon.count

    for i in 0..<n {
        let j = (i + 1) % n
        area += polygon[i].longitude * polygon[j].latitude
        area -= polygon[j].longitude * polygon[i].latitude
    }

    area = abs(area) / 2

    // 转换为平方米(近似计算)
    let metersPerDegree = 111320.0
    area *= metersPerDegree * metersPerDegree

    return area
}
```

**领地重叠检测 (PostGIS查询):**
```sql
-- 检查新领地是否与现有领地重叠
SELECT id, name FROM territories
WHERE ST_Overlaps(
  boundary,
  ST_GeomFromText('POLYGON((...))', 4326)
)
LIMIT 1;
```

**附近玩家查询 (地理围栏):**
```sql
-- 查询3km范围内的玩家
SELECT u.id, u.username, ST_Distance(
  u.last_location::geography,
  ST_MakePoint(:lng, :lat)::geography
) as distance
FROM users u
WHERE ST_DWithin(
  u.last_location::geography,
  ST_MakePoint(:lng, :lat)::geography,
  3000 -- 3km = 3000米
)
ORDER BY distance
LIMIT 50;
```

### 8.4 性能优化

**客户端优化:**
1. **地图渲染优化**:
   - 只渲染可见区域的领地和POI
   - 使用LOD(Level of Detail):远处使用简化图标
   - 地图瓦片缓存

2. **GPS采样优化**:
   - 移动时1秒/次,静止时5秒/次
   - 低电量模式下降频到5秒/次
   - 后台运行时降频到30秒/次

3. **数据同步优化**:
   - 本地优先: 读取本地数据库,异步同步云端
   - 增量同步: 只同步变更的数据
   - 批量上传: 累积多个操作后一次性上传

**服务端优化:**
1. **数据库索引**:
   - 所有地理字段建立GIST空间索引
   - user_id、territory_id等外键建立B-Tree索引

2. **查询优化**:
   - 使用数据库视图预计算复杂查询(如排行榜)
   - 使用Redis缓存热点数据(排行榜、成就进度)

3. **并发控制**:
   - 使用数据库事务保证交易原子性
   - 使用乐观锁处理背包物品并发修改

---

## 9. 测试与迭代计划

### 9.1 测试阶段

**Alpha测试 (内部测试)**
- **时间**: 2周
- **测试人员**: 开发团队5人
- **测试内容**:
  - 核心玩法流程测试
  - 功能完整性测试
  - 性能压力测试
  - 作弊防护测试

**Beta测试 (封闭测试)**
- **时间**: 2周
- **测试人员**: 邀请50-100名玩家
- **测试内容**:
  - 真实场景GPS测试
  - 游戏平衡性测试
  - 社交功能测试
  - 付费流程测试
  - 收集玩家反馈

**公开测试 (Open Beta)**
- **时间**: 1周
- **测试人员**: 公开招募500-1000名玩家
- **测试内容**:
  - 服务器负载测试
  - 大规模并发测试
  - 跨地区测试(不同GPS环境)
  - 最终bug修复

### 9.2 迭代计划

**v1.0 → v1.1 (社交强化)**
- 优化交易体验(增加交易市场)
- 增加好友系统
- 增加私聊功能
- 优化频道管理

**v1.1 → v1.2 (深度玩法)**
- 增加PvP战斗(领地争夺)
- 增加世界Boss事件
- 增加季节性活动
- 增加更多建筑类型

**v1.2 → v2.0 (联盟系统)**
- 玩家可创建联盟
- 联盟领地系统
- 联盟战争
- 联盟科技树
- 联盟任务

---

## 10. 运营策略

### 10.1 上线前准备

**App Store优化 (ASO):**
- 关键词: LBS游戏、末日生存、圈地、Walk to Earn
- 截图: 展示圈地、探索、建造、社交4大核心玩法
- 视频预览: 30秒精华展示

**社交媒体预热:**
- 建立官方Twitter、Instagram、Discord
- 发布世界观介绍、玩法预告
- 举办"命名你的第一块领地"活动
- 提前招募100名核心玩家(KOL)

### 10.2 上线后运营

**第一周: 冲榜**
- 目标: 进入App Store游戏榜Top 100
- 策略:
  - 邀请机制: 邀请好友送资源包
  - 限时优惠: 订阅首月5折
  - KOL推广: 联系游戏主播/UP主试玩

**第一个月: 留存**
- 目标: 7日留存率>25%
- 策略:
  - 每日任务系统
  - 新手成就引导
  - 每周排行榜奖励
  - 社区活动(最美领地评选)

**长期运营:**
- 每月更新: 新建筑、新POI、新成就
- 赛季系统: 每3个月一个赛季,重置排行榜
- 节日活动: 圣诞、万圣节等主题活动
- 联盟战争: 每周末举办联盟对抗赛

### 10.3 用户增长策略

**病毒式传播:**
- 在地图上看到其他玩家的领地→好奇心→下载游戏
- 交易系统→需要附近玩家→邀请朋友
- 排行榜→炫耀→分享到社交媒体

**跨平台推广:**
- 与运动App合作(Keep、咕咚)
- 与本地生活App合作(大众点评、小红书)
- 参加游戏展会(ChinaJoy、TGS)

**付费广告:**
- Facebook Ads: 定向投放给《宝可梦GO》玩家
- Google Ads: 关键词投放"LBS游戏"
- TikTok Ads: 短视频展示玩法

---

## 11. 风险与应对

### 11.1 技术风险

| 风险 | 概率 | 影响 | 应对方案 |
|-----|------|------|---------|
| GPS精度不足 | 中 | 高 | 使用苹果原生定位;增加轨迹平滑算法;提示用户开启高精度GPS |
| 电量消耗过高 | 高 | 高 | 优化定位频率;后台智能降频;提供"省电模式" |
| 地理数据库性能 | 中 | 中 | PostGIS空间索引;缓存热点区域;分区部署 |
| 实时消息延迟 | 低 | 中 | Supabase Realtime已验证;备用方案HTTP轮询 |

### 11.2 产品风险

| 风险 | 概率 | 影响 | 应对方案 |
|-----|------|------|---------|
| 玩家流失率高 | 高 | 高 | 成就系统引导;生存体征增加粘性;每日任务;社交留存 |
| 付费转化率低 | 中 | 高 | 免费体验足够好;订阅价值明确;限时优惠;KOL推荐 |
| 作弊行为泛滥 | 中 | 中 | GPS速度检测;轨迹异常识别;人工审核;封号机制 |
| 隐私问题投诉 | 低 | 高 | 隐私政策明确;位置数据加密;用户可控;符合GDPR |

### 11.3 市场风险

| 风险 | 概率 | 影响 | 应对方案 |
|-----|------|------|---------|
| 竞品打压 | 中 | 中 | 差异化定位;快速迭代;社区运营;建立品牌忠诚度 |
| App Store审核被拒 | 低 | 高 | 提前准备审核材料;遵守苹果政策;聘请ASO专家 |
| 政策法规变化 | 低 | 高 | 符合各国数据保护法;法务团队审核;及时调整 |

---

## 12. 成功指标 (KPI)

### 12.1 用户指标

| 指标 | 目标(第1个月) | 目标(第3个月) | 目标(第6个月) |
|-----|-------------|-------------|-------------|
| 注册用户数 | 10,000 | 50,000 | 100,000 |
| DAU(日活) | 3,000 | 15,000 | 30,000 |
| MAU(月活) | 10,000 | 40,000 | 80,000 |
| 次日留存 | 35% | 40% | 45% |
| 7日留存 | 20% | 25% | 30% |
| 30日留存 | 10% | 15% | 20% |

### 12.2 行为指标

| 指标 | 目标 |
|-----|------|
| 日均游玩时长 | ≥30分钟 |
| 日均行走距离 | ≥2公里 |
| 日均探索POI数 | ≥3个 |
| 圈地成功率 | ≥60% |
| 日均聊天消息数 | ≥10万条 |
| 交易成交率 | ≥40% |

### 12.3 商业指标

| 指标 | 目标(第1个月) | 目标(第3个月) | 目标(第6个月) |
|-----|-------------|-------------|-------------|
| 付费用户数 | 300 | 1,500 | 3,000 |
| 付费转化率 | 3% | 4% | 5% |
| ARPU(平均每用户收入) | $2 | $3 | $5 |
| 月收入 | $6,000 | $45,000 | $120,000 |
| LTV(用户生命周期价值) | $10 | $20 | $30 |

---

## 13. 附录

### 13.1 参考游戏

| 游戏名称 | 学习点 |
|---------|-------|
| 宝可梦GO | LBS玩法、POI探索、社区日活动 |
| Ingress | 领地占领、团队协作、全球地图 |
| 饥荒 | 生存体征、资源管理、建造系统 |
| Rust | 领地保护、资源争夺、PvP机制 |
| Minecraft | 建造自由度、资源分类、合成系统 |

### 13.2 开发工具

| 工具 | 用途 |
|-----|------|
| Xcode | iOS开发IDE |
| SwiftUI | UI框架 |
| Supabase | 后端服务 |
| PostGIS | 地理数据库 |
| Git | 版本控制 |
| Figma | UI设计 |
| Claude/ChatGPT | AI辅助开发 |

### 13.3 团队分工 (未来扩展)

| 角色 | 职责 | 人数 |
|-----|------|------|
| 产品经理 | 需求管理、用户调研、数据分析 | 1 |
| iOS开发 | 客户端开发、性能优化 | 2-3 |
| 后端开发 | 服务器开发、数据库优化 | 1-2 |
| UI设计师 | 界面设计、图标设计 | 1 |
| 运营 | 社区管理、活动策划、客服 | 1-2 |

---

**文档结束**

---

**审批流程:**

| 角色 | 姓名 | 日期 | 签名 |
|-----|------|------|------|
| 游戏设计师 | | | |
| 技术负责人 | | | |
| 美术总监 | | | |
| 项目经理 | | | |
| 制作人 | | | |
